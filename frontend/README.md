# ä¼ä¸šè€ƒå‹¤ç³»ç»Ÿ - å‰ç«¯

åŸºäº Vue 3 + TypeScript + Vite æ„å»ºçš„ç°ä»£åŒ–å‰ç«¯åº”ç”¨ã€‚

## ğŸ“‹ ç›®å½•

- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [åŠŸèƒ½æ¨¡å—](#åŠŸèƒ½æ¨¡å—)
- [å¼€å‘è§„èŒƒ](#å¼€å‘è§„èŒƒ)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

## ğŸ›  æŠ€æœ¯æ ˆ

- **Vue 3** - æ¸è¿›å¼ JavaScript æ¡†æ¶ï¼ˆComposition APIï¼‰
- **TypeScript** - ç±»å‹å®‰å…¨çš„ JavaScript
- **Vite** - ä¸‹ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·
- **Vue Router** - å®˜æ–¹è·¯ç”±ç®¡ç†å™¨
- **Pinia** - æ–°ä¸€ä»£çŠ¶æ€ç®¡ç†åº“
- **Element Plus** - åŸºäº Vue 3 çš„ç»„ä»¶åº“
- **Axios** - HTTP å®¢æˆ·ç«¯

## ğŸ“ é¡¹ç›®ç»“æ„

```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ views/              # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Login.vue       # ç™»å½•é¡µ
â”‚   â”‚   â”œâ”€â”€ Dashboard.vue   # ä»ªè¡¨ç›˜
â”‚   â”‚   â”œâ”€â”€ Punch.vue       # æ‰“å¡é¡µé¢
â”‚   â”‚   â”œâ”€â”€ PunchHistory.vue # æ‰“å¡å†å²
â”‚   â”‚   â”œâ”€â”€ Requests.vue    # ç”³è¯·åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ RequestCreate.vue # åˆ›å»ºç”³è¯·
â”‚   â”‚   â”œâ”€â”€ Approvals.vue   # å®¡æ‰¹ç®¡ç†ï¼ˆç®¡ç†ç«¯ï¼‰
â”‚   â”‚   â”œâ”€â”€ Stats.vue       # ç»Ÿè®¡é¡µé¢
â”‚   â”‚   â”œâ”€â”€ Profile.vue     # ä¸ªäººä¸­å¿ƒ
â”‚   â”‚   â””â”€â”€ NotFound.vue    # 404 é¡µé¢
â”‚   â”œâ”€â”€ layouts/            # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â””â”€â”€ MainLayout.vue  # ä¸»å¸ƒå±€
â”‚   â”œâ”€â”€ router/             # è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ index.ts        # è·¯ç”±å®šä¹‰å’Œå®ˆå«
â”‚   â”œâ”€â”€ stores/             # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ auth.ts         # è®¤è¯çŠ¶æ€
â”‚   â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ request.ts      # Axios å°è£…
â”‚   â”œâ”€â”€ config/             # é…ç½®æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ api.ts          # API ç«¯ç‚¹é…ç½®
â”‚   â”œâ”€â”€ App.vue             # æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ main.ts             # å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ style.css           # å…¨å±€æ ·å¼
â”œâ”€â”€ index.html              # HTML æ¨¡æ¿
â”œâ”€â”€ package.json            # ä¾èµ–é…ç½®
â”œâ”€â”€ tsconfig.json           # TypeScript é…ç½®
â”œâ”€â”€ vite.config.ts          # Vite é…ç½®
â””â”€â”€ README.md               # æœ¬æ–‡ä»¶
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

åˆ›å»º `.env.development` æ–‡ä»¶ï¼š

```env
VITE_API_BASE_URL=http://localhost:3000
```

### 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

å‰ç«¯åº”ç”¨å°†åœ¨ `http://localhost:5173` å¯åŠ¨ã€‚

### 4. æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
```

æ„å»ºäº§ç‰©å°†è¾“å‡ºåˆ° `dist` ç›®å½•ã€‚

### 5. é¢„è§ˆç”Ÿäº§æ„å»º

```bash
npm run preview
```

## âœ¨ åŠŸèƒ½æ¨¡å—

### è®¤è¯æ¨¡å—
- ç”¨æˆ·ç™»å½•
- Token ç®¡ç†
- è·¯ç”±å®ˆå«
- è‡ªåŠ¨ç™»å‡º

### æ‰“å¡æ¨¡å—
- ä¸Šç­/ä¸‹ç­æ‰“å¡
- åœ°ç†ä½ç½®è·å–
- æ‰“å¡è®°å½•æŸ¥è¯¢
- æ‰“å¡å†å²ï¼ˆæŒ‰æ—¥æœŸåˆ†ç»„ï¼‰

### ç”³è¯·æ¨¡å—
- **åˆ›å»ºç”³è¯·**
  - è¯·å‡ç”³è¯·ï¼ˆé€‰æ‹©è¯·å‡ç±»å‹ã€æ—¶é—´ã€åŸå› ï¼‰
  - å‡ºå·®ç”³è¯·ï¼ˆé€‰æ‹©å‡ºå·®æ—¶é—´ã€ç›®çš„åœ°ã€åŸå› ï¼‰
  - è¡¥å¡ç”³è¯·ï¼ˆé€‰æ‹©è¡¥å¡æ—¶é—´ã€åŸå› ï¼‰
  - åŠ ç­ç”³è¯·ï¼ˆé€‰æ‹©åŠ ç­æ—¶é—´ã€åŸå› ï¼‰
- **ç”³è¯·åˆ—è¡¨**
  - æŸ¥çœ‹æ‰€æœ‰ç”³è¯·
  - æŸ¥çœ‹ç”³è¯·è¯¦æƒ…
  - å–æ¶ˆç”³è¯·
  - æ˜¾ç¤ºå®¡æ‰¹ç»“æœå’Œæ—¶é•¿
- **çŠ¶æ€æ ‡è¯†**
  - å¾…å®¡æ‰¹ã€å·²é€šè¿‡ã€å·²é©³å›ã€å·²å–æ¶ˆ

### å®¡æ‰¹æ¨¡å—ï¼ˆç®¡ç†ç«¯ï¼‰
- å¾…å®¡æ‰¹åˆ—è¡¨
- å®¡æ‰¹è¯¦æƒ…æŸ¥çœ‹
- å®¡æ‰¹é€šè¿‡/é©³å›
- ä¿®æ”¹ç”³è¯·æ—¶é•¿ï¼ˆä»¥å°æ—¶ä¸ºå•ä½ï¼‰
- å¡«å†™å®¡æ‰¹æ„è§

### ç»Ÿè®¡æ¨¡å—
- æœˆåº¦ç»Ÿè®¡
- å·¥æ—¶æ±‡æ€»
  - åŸºç¡€å·¥æ—¶ï¼ˆæ‰“å¡ï¼‰
  - åŠ ç­å·¥æ—¶
  - è¡¥å¡å·¥æ—¶
  - å‡ºå·®å·¥æ—¶
- è¯·å‡å¤©æ•°ç»Ÿè®¡
- å‡ºå‹¤å¤©æ•°ç»Ÿè®¡

### ç”¨æˆ·ç®¡ç†æ¨¡å—ï¼ˆAdmin/HRï¼‰
- **ç”¨æˆ·åˆ—è¡¨**
  - åˆ†é¡µæŸ¥è¯¢
  - å…³é”®è¯æœç´¢ï¼ˆå§“å/é‚®ç®±/å·¥å·/æ‰‹æœºå·ï¼‰
  - æ˜¾ç¤ºç”¨æˆ·åŸºæœ¬ä¿¡æ¯ã€éƒ¨é—¨ã€è§’è‰²ã€çŠ¶æ€
- **åˆ›å»ºç”¨æˆ·**
  - è®¾ç½®å§“åã€é‚®ç®±ã€å¯†ç 
  - åˆ†é…éƒ¨é—¨å’Œè§’è‰²
  - è®¾ç½®å·¥å·ã€æ‰‹æœºå·
  - è®¾ç½®ç”¨æˆ·çŠ¶æ€
- **ç¼–è¾‘ç”¨æˆ·**
  - ä¿®æ”¹åŸºæœ¬ä¿¡æ¯
  - è°ƒæ•´éƒ¨é—¨å’Œè§’è‰²
  - é‡ç½®å¯†ç 
  - æ›´æ”¹ç”¨æˆ·çŠ¶æ€
- **åˆ é™¤ç”¨æˆ·**
  - è½¯åˆ é™¤ï¼ˆè®¾ç½®ä¸ºç¦»èŒçŠ¶æ€ï¼‰

### ä¸ªäººä¸­å¿ƒ
- ç”¨æˆ·ä¿¡æ¯å±•ç¤º
- éƒ¨é—¨ä¿¡æ¯å±•ç¤º
- è§’è‰²ä¿¡æ¯å±•ç¤º

## ğŸ”§ API é›†æˆ

æ‰€æœ‰ API è¯·æ±‚é€šè¿‡ `src/utils/request.ts` ç»Ÿä¸€å°è£…ï¼Œæ”¯æŒï¼š

- è‡ªåŠ¨æ·»åŠ  Authorization header
- ç»Ÿä¸€é”™è¯¯å¤„ç†
- è¯·æ±‚/å“åº”æ‹¦æˆª
- ç±»å‹å®‰å…¨çš„è¯·æ±‚æ–¹æ³•

### ä½¿ç”¨ç¤ºä¾‹

```typescript
import request from '@/utils/request'
import { API_ENDPOINTS } from '@/config/api'

// GET è¯·æ±‚
const data = await request.get<ResponseType>(API_ENDPOINTS.PUNCH_TODAY)

// POST è¯·æ±‚
const result = await request.post<ResponseType>(API_ENDPOINTS.PUNCH, {
  punchType: 'IN',
  lat: 39.9042,
  lng: 116.4074
})
```

## ğŸ›£ è·¯ç”±é…ç½®

è·¯ç”±é…ç½®åœ¨ `src/router/index.ts`ï¼ŒåŒ…å«ï¼š

### å…¬å¼€è·¯ç”±
- `/login` - ç™»å½•é¡µ

### éœ€è¦è®¤è¯çš„è·¯ç”±
- `/` - ä»ªè¡¨ç›˜
- `/punch` - æ‰“å¡
- `/punch/history` - æ‰“å¡å†å²
- `/requests` - ç”³è¯·åˆ—è¡¨
- `/requests/create` - åˆ›å»ºç”³è¯·
- `/stats` - ç»Ÿè®¡
- `/profile` - ä¸ªäººä¸­å¿ƒ

### ç®¡ç†ç«¯è·¯ç”±ï¼ˆéœ€è¦ MANAGER/HR/ADMIN è§’è‰²ï¼‰
- `/approvals` - å®¡æ‰¹ç®¡ç†

### è·¯ç”±å®ˆå«

- **è®¤è¯æ£€æŸ¥**ï¼šæœªç™»å½•ç”¨æˆ·è‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µ
- **è§’è‰²æƒé™**ï¼šé€šè¿‡ `meta.requiresRoles` æ§åˆ¶è®¿é—®æƒé™

## ğŸ“¦ çŠ¶æ€ç®¡ç†

ä½¿ç”¨ Pinia è¿›è¡ŒçŠ¶æ€ç®¡ç†ï¼Œä¸»è¦ storeï¼š

### Auth Store (`stores/auth.ts`)

```typescript
interface AuthState {
  token: string | null
  user: User | null
}

// ä¸»è¦æ–¹æ³•
- login(token, user)  // ç™»å½•
- logout()            // ç™»å‡º
- hasRole(role)       // æ£€æŸ¥è§’è‰²æƒé™
```

## ğŸ¨ å¼€å‘è§„èŒƒ

### ä»£ç é£æ ¼
- ä½¿ç”¨ TypeScript ä¸¥æ ¼æ¨¡å¼
- éµå¾ª Vue 3 Composition API è§„èŒƒ
- ä½¿ç”¨ ESLint è¿›è¡Œä»£ç æ£€æŸ¥

### ç»„ä»¶è§„èŒƒ
- ä½¿ç”¨ `<script setup>` è¯­æ³•
- ç»„ä»¶å‘½åä½¿ç”¨ PascalCase
- Props å’Œ Emits éœ€è¦ç±»å‹å®šä¹‰
- åˆç†ä½¿ç”¨ `ref` å’Œ `reactive`

### API è°ƒç”¨è§„èŒƒ
- ç»Ÿä¸€ä½¿ç”¨ `request` å·¥å…·å‡½æ•°
- API ç«¯ç‚¹å®šä¹‰åœ¨ `src/config/api.ts`
- é”™è¯¯å¤„ç†ç»Ÿä¸€åœ¨æ‹¦æˆªå™¨ä¸­å¤„ç†
- ä½¿ç”¨ TypeScript æ³›å‹å®šä¹‰è¿”å›ç±»å‹

### æ ·å¼è§„èŒƒ
- ä½¿ç”¨ scoped æ ·å¼é¿å…æ±¡æŸ“
- åˆç†ä½¿ç”¨ Element Plus ä¸»é¢˜å˜é‡
- å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒç§»åŠ¨ç«¯

## â“ å¸¸è§é—®é¢˜

### 1. è·¨åŸŸé—®é¢˜

å¼€å‘ç¯å¢ƒå·²é…ç½®ä»£ç†ï¼Œç”Ÿäº§ç¯å¢ƒéœ€è¦é…ç½® CORSã€‚

### 2. Token è¿‡æœŸ

Token è¿‡æœŸä¼šè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µï¼Œéœ€è¦é‡æ–°ç™»å½•ã€‚

### 3. æƒé™æ§åˆ¶

- è·¯ç”±çº§åˆ«ï¼šé€šè¿‡ `meta.requiresRoles` æ§åˆ¶
- ç»„ä»¶çº§åˆ«ï¼šé€šè¿‡ `authStore.hasRole()` åˆ¤æ–­
- æŒ‰é’®çº§åˆ«ï¼šä½¿ç”¨ `v-if` é…åˆè§’è‰²æ£€æŸ¥

### 4. åœ°ç†ä½ç½®è·å–å¤±è´¥

- æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒåœ°ç†ä½ç½® API
- æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æˆäºˆä½ç½®æƒé™
- HTTPS ç¯å¢ƒä¸‹æ‰èƒ½æ­£å¸¸ä½¿ç”¨åœ°ç†ä½ç½® API

### 5. æ„å»ºå¤±è´¥

- æ¸…é™¤ç¼“å­˜ï¼š`rm -rf node_modules && npm install`
- æ£€æŸ¥ Node.js ç‰ˆæœ¬ï¼šéœ€è¦ â‰¥ 20
- æ£€æŸ¥ TypeScript ç±»å‹é”™è¯¯

## ğŸ” è°ƒè¯•æŠ€å·§

### å¼€å‘å·¥å…·
- Vue DevTools - è°ƒè¯• Vue ç»„ä»¶å’ŒçŠ¶æ€
- Network é¢æ¿ - æŸ¥çœ‹ API è¯·æ±‚
- Console é¢æ¿ - æŸ¥çœ‹æ—¥å¿—è¾“å‡º

### å¸¸ç”¨å‘½ä»¤
```bash
# ç±»å‹æ£€æŸ¥
npm run type-check

# æ„å»º
npm run build

# é¢„è§ˆæ„å»ºç»“æœ
npm run preview
```

## ğŸ“ ç¯å¢ƒå˜é‡

### å¼€å‘ç¯å¢ƒ (.env.development)
```env
VITE_API_BASE_URL=http://localhost:3000
```

### ç”Ÿäº§ç¯å¢ƒ (.env.production)
```env
VITE_API_BASE_URL=https://api.yourdomain.com
```

## ğŸš¢ éƒ¨ç½²

### æ¨èéƒ¨ç½²æ–¹æ¡ˆï¼šVercel

æœ¬é¡¹ç›®æ¨èä½¿ç”¨ Vercel éƒ¨ç½²å‰ç«¯ï¼Œæ”¯æŒè‡ªåŠ¨ HTTPSã€å…¨çƒ CDNã€GitHub è‡ªåŠ¨éƒ¨ç½²ç­‰åŠŸèƒ½ã€‚

#### 1. åˆ›å»º vercel.jsonï¼ˆå¯é€‰ï¼‰

åœ¨ `frontend` ç›®å½•åˆ›å»º `vercel.json`ï¼š

```json
{
  "buildCommand": "npm run build",
  "outputDirectory": "dist",
  "devCommand": "npm run dev",
  "installCommand": "npm install",
  "framework": "vite",
  "rewrites": [
    {
      "source": "/(.*)",
      "destination": "/index.html"
    }
  ]
}
```

#### 2. åˆ›å»ºç”Ÿäº§ç¯å¢ƒé…ç½®

åœ¨ `frontend` ç›®å½•åˆ›å»º `.env.production`ï¼š

```env
VITE_API_BASE_URL=https://your-api-url.onrender.com
```

å°† `your-api-url.onrender.com` æ›¿æ¢ä¸ºä½ çš„åç«¯ Render URLã€‚

#### 3. åœ¨ Vercel åˆ›å»ºé¡¹ç›®

1. ç™»å½• https://vercel.com/
2. ç‚¹å‡» **"Add New..."** â†’ **"Project"**
3. è¿æ¥ GitHub ä»“åº“
4. é…ç½®é¡¹ç›®ï¼š
   - **Framework Preset**: `Vite`
   - **Root Directory**: `frontend`
   - **Build Command**: `npm run build`ï¼ˆè‡ªåŠ¨æ£€æµ‹ï¼‰
   - **Output Directory**: `dist`ï¼ˆè‡ªåŠ¨æ£€æµ‹ï¼‰

#### 4. é…ç½®ç¯å¢ƒå˜é‡

åœ¨ Vercel é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ ï¼š

| å˜é‡å | å€¼ | ç¯å¢ƒ |
|--------|-----|------|
| `VITE_API_BASE_URL` | `https://your-api-url.onrender.com` | Production, Preview |

#### 5. éƒ¨ç½²

ç‚¹å‡» **"Deploy"**ï¼Œç­‰å¾…æ„å»ºå®Œæˆã€‚Vercel ä¼šè‡ªåŠ¨æä¾› URLï¼Œä¾‹å¦‚ï¼š
```
https://attendance-frontend.vercel.app
```

#### 6. é…ç½® CORS

ç¡®ä¿åç«¯ CORS é…ç½®åŒ…å«å‰ç«¯åŸŸåã€‚åœ¨ Render åç«¯æœåŠ¡çš„ CORS é…ç½®ä¸­æ·»åŠ ï¼š

```typescript
origin: [
  'http://localhost:5173', // æœ¬åœ°å¼€å‘
  'https://your-frontend-url.vercel.app', // Vercel å‰ç«¯åŸŸå
],
```

### å…¶ä»–éƒ¨ç½²æ–¹æ¡ˆ

#### æ„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
npm run build
```

#### éƒ¨ç½²åˆ°é™æ€æœåŠ¡å™¨
å°† `dist` ç›®å½•éƒ¨ç½²åˆ°ä»¥ä¸‹ä»»ä¸€å¹³å°ï¼š
- Nginx
- Apache
- Netlify
- GitHub Pages

#### Nginx é…ç½®ç¤ºä¾‹
```nginx
server {
    listen 80;
    server_name yourdomain.com;
    root /path/to/dist;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }

    # API ä»£ç†ï¼ˆå¦‚æœéœ€è¦ï¼‰
    location /api {
        proxy_pass http://your-backend-url;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
```

## ğŸ“„ è®¸å¯è¯

MIT

---

**æœ€åæ›´æ–°**: 2025-01-07  
**ç‰ˆæœ¬**: 1.0.0
